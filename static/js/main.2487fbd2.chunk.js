(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(t,e,n){t.exports={submsgAnimation:"LoadingDisplay_submsgAnimation__2Sjsr",topFadeIn:"LoadingDisplay_topFadeIn__2pbvn",msgAnimation:"LoadingDisplay_msgAnimation__2of1N",fadeIn:"LoadingDisplay_fadeIn__2696C"}},36:function(t,e,n){t.exports=n.p+"static/media/eighth_note.04892710.svg"},37:function(t,e,n){t.exports=n.p+"static/media/quarter_note.aaec5659.svg"},38:function(t,e,n){t.exports=n.p+"static/media/half_note.f0263bb6.svg"},39:function(t,e,n){t.exports=n.p+"static/media/whole_note.f4f20522.svg"},44:function(t,e,n){t.exports=n(74)},50:function(t,e,n){},73:function(t,e,n){},74:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(35),o=n(12),s=(n(49),n(50),n(3)),c=n(4),l=n(6),u=n(5),h=n(7),m=n(13),d=n(14);function p(){return window.innerHeight>window.innerWidth&&("ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0)}var f=n(2),g=n.n(f),v=n(18),b=n.n(v),y=n(42),w=n(16),E=n.n(w),_=n(36),j=n.n(_),k=n(37),O=n.n(k),N=n(38),x=n.n(N),S=n(39),L=n.n(S),H=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(i)))).state={hovernote:null},n.getHoverArray=function(){return null===n.state.hovernote?n.props.notes:[].concat(Object(y.a)(n.props.notes),[{relative_value:n.state.hovernote,duration:n.props.selectedDuration}])},n}return Object(h.a)(e,t),Object(c.a)(e,[{key:"svgRender",value:function(){var t=this,e=E()("#svg"+this.props.keyId.toString());E.a.load(j.a,function(n){E.a.load(O.a,function(a){E.a.load(x.a,function(i){E.a.load(L.a,function(r){e.clear();var o=[n.select("g"),a.select("g"),i.select("g"),r.select("g")];if(e.rect(0,0,t.props.width,t.props.height).attr({fill:"#FFF",stroke:"#000",strokeWidth:"5"}),t.drawLine(0,e),t.drawLine(1,e),t.drawLine(2,e),t.drawLine(3,e),t.drawLine(4,e),t.props.editable)for(var s=-7;s<=7;s++)t.drawBoundingBox(1.25+-.5*s,s,e);t.drawNotes(e,o,t.getHoverArray(),!(null===t.state.hovernote))})})})})}},{key:"drawNotes",value:function(t,e,n,a){var i=this,r=0;n.forEach(function(n,o,s){a&&Object.is(s.length-1,o)?i.drawNote(t,e,r,n,!0):(i.drawNote(t,e,r,n),r+=1)})}},{key:"drawNote",value:function(t,e,n,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=100+n*this.lineHeight()*2,o=this.C_position()-a.relative_value*(this.lineHeight()/2),s=null;switch(a.duration){case.125:s=e[0].clone();break;case.25:s=e[1].clone();break;case.5:s=e[2].clone();break;case 1:s=e[3].clone()}s.attr({transform:"translate(".concat(r,", ").concat(o,")"),pointerEvents:"none"}),i?s.attr({fill:"#919998",stroke:"#999"}):s.attr({fill:"#000",stroke:"#000"}),t.append(s),this.props.comparison&&t.rect(r,30,12,12).attr({fill:a.correct?"#4ED81A":"#FF336E",stroke:a.correct?"#44b81a":"#d62255",strokeWidth:2}),this.drawLedgerLines(t,n,a)}},{key:"drawLedgerLines",value:function(t,e,n){var a=100+e*this.lineHeight()*2;n.relative_value<-6&&t.line(a-15,this.calculateLineHeight(5),a+15,this.calculateLineHeight(5)).attr({stroke:"#000",strokeWidth:"2"}),n.relative_value>4&&t.line(a-15,this.calculateLineHeight(-1),a+15,this.calculateLineHeight(-1)).attr({stroke:"#000",strokeWidth:"2"}),n.relative_value>6&&t.line(a-15,this.calculateLineHeight(-2),a+15,this.calculateLineHeight(-2)).attr({stroke:"#000",strokeWidth:"2"})}},{key:"drawLine",value:function(t,e){e.line(this.props.marginX,this.calculateLineHeight(t),this.props.width-this.props.marginX,this.calculateLineHeight(t)).attr({stroke:"#000",strokeWidth:"2"})}},{key:"drawBoundingBox",value:function(t,e,n){var a=this,i=n.rect(this.props.marginX+this.props.notes.length*this.lineHeight()*2,this.calculateLineHeight(t),this.props.width-2*this.props.marginX,this.lineHeight()/2).attr({fill:"rgba(50,50,50,.0)"}),r=n.group(i);r.mousedown(function(){a.props.addNote(e)}),r.mouseover(function(){a.setState({hovernote:e})}).mouseout(function(){a.setState({hovernote:null})})}},{key:"lineHeight",value:function(){return this.props.height/20}},{key:"calculateLineHeight",value:function(t){return t*this.lineHeight()+this.props.height/2.75}},{key:"C_position",value:function(){return this.calculateLineHeight(3)-3*this.lineHeight()/2}},{key:"componentDidMount",value:function(){this.svgRender()}},{key:"componentDidUpdate",value:function(){this.svgRender()}},{key:"render",value:function(){var t="svg"+this.props.keyId.toString();return i.a.createElement("svg",{className:"sheetmusic",style:this.props.style,width:this.props.width,height:this.props.height,id:t})}}]),e}(i.a.Component);H.defaultProps={marginX:30,editable:!0,comparison:!1};var T=H;function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=(new g.a.Synth).toMaster();g.a.Transport.stop(),g.a.Transport.cancel(),function(t,e,n){function a(t){return function(n){return e.triggerAttackRelease(function(t){return C[t]}(t),"8n")}}var i=0;t.forEach(function(t){g.a.Transport.scheduleOnce(a(t.relative_value),parseFloat(i*g.a.Time("1m"))),i+=t.duration}),g.a.Transport.scheduleOnce(n,parseFloat(i*g.a.Time("1m")))}(t,n,e),g.a.Transport.start()}var C={"-7":"C4","-6":"D4","-5":"E4","-4":"F4","-3":"G4","-2":"A4","-1":"B4",0:"C5",1:"D5",2:"E5",3:"F5",4:"G5",5:"A5",6:"B5",7:"C6"},P=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(i)))).state={playing:!1},n.play=function(){n.emitStop(),n.setState({playing:!0}),A(n.props.music,function(){n.emitStop()})},n.stop=function(){n.emitStop(),g.a.Transport.stop()},n.emitStop=function(){n.props.emit("stop")},n}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.addListener("stop",function(){t.setState({playing:!1})}),this.props.playOnLoad&&this.play()}},{key:"render",value:function(){return i.a.createElement("button",{className:"red",onClick:this.state.playing?this.stop:this.play},this.state.playing?"Pause":"Play")}}]),e}(i.a.Component);P.defaultProps={playOnLoad:!1};var D=Object(d.Emitter)(P),I=(Object(d.Emitter)(P),n(19)),W=n(21),F=n.n(W),B={0:"Loading",1:"Loading.",2:"Loading..",3:"Loading..."},M=function(){var t=Object(a.useState)(0),e=Object(I.a)(t,2),n=e[0],r=e[1],o=Object(a.useState)(!1),s=Object(I.a)(o,2),c=s[0],l=s[1],u=Object(a.useState)(!1),h=Object(I.a)(u,2),m=h[0],d=h[1];return Object(a.useEffect)(function(){var t=setInterval(function(){r(function(t){return(t+1)%4})},600),e=setTimeout(function(){return d(function(t){return!0})},4e3),n=setTimeout(function(){return l(function(t){return!0})},1e3);return function(){clearInterval(t),clearTimeout(n),clearTimeout(e)}},[]),i.a.createElement("div",{className:"d-flex flex-column h-100 justify-content-center"},c&&i.a.createElement("h2",{className:"w-100 text-center ".concat(F.a.msgAnimation)},B[n]),m?i.a.createElement("p",{className:"text-center text-muted ".concat(F.a.submsgAnimation)},"The Heroku servers are warming up!"):i.a.createElement("p",null,"\xa0"))},X=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(i)))).state={loading:!0,first_time:!1,redirect:!1,actual_song:[],user_song:[],selected_duration:.25},n.addNote=function(t){n.setState({user_song:n.state.user_song.concat({relative_value:t,duration:n.state.selected_duration})})},n.undo=function(){n.setState({user_song:n.state.user_song.slice(0,-1)})},n.setDuration=function(t){n.setState({selected_duration:t})},n.submit=function(){n.props.setPost({user:n.state.user_song,actual:n.state.actual_song}),n.setState({redirect:!0}),g.a.Transport.stop()},n}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this;b.a.get("".concat("http://178.128.145.15:5000","/api/get")).then(function(t){return JSON.parse(t.data)}).then(function(e){t.setState({actual_song:e.notes,user_song:[e.notes[0]],loading:!1})}),null===localStorage.getItem("first_time")&&(localStorage.setItem("first_time",!1),this.setState({first_time:!0}))}},{key:"render",value:function(){var t=this;return this.state.redirect?i.a.createElement(m.a,{to:"/compare"}):this.state.loading?i.a.createElement(M,null):i.a.createElement("div",{className:"pt-3"},i.a.createElement("div",{className:"d-flex flex-row align-items-center justify-content-between mt-3 mb-2"},i.a.createElement("h2",{className:"font-weight-bold m-0"},"Transcriboid"),i.a.createElement("div",{className:"d-flex align-items-end"},this.state.first_time&&i.a.createElement("p",{className:"my-0 mx-2 text-muted font-weight-bold"},"click here to play the song."),i.a.createElement(D,{music:this.state.actual_song}))),i.a.createElement(T,{keyId:1,width:window.innerWidth-20,height:window.innerHeight/2,marginX:40,addNote:this.addNote,notes:this.state.user_song,selectedDuration:this.state.selected_duration}),i.a.createElement("div",{className:"d-flex flex-row align-items-center justify-content-between my-2"},i.a.createElement("div",null,i.a.createElement("button",{className:"medium thin",onClick:function(){return t.setDuration(.125)}},"Eighth"),i.a.createElement("button",{className:"medium thin",onClick:function(){return t.setDuration(.25)}},"Quarter"),i.a.createElement("button",{className:"medium thin",onClick:function(){return t.setDuration(.5)}},"Half"),i.a.createElement("button",{className:"medium thin",onClick:function(){return t.setDuration(1)}},"Whole")),i.a.createElement("div",null,i.a.createElement("button",{className:"medium thin red",onClick:this.undo},"Undo"),i.a.createElement("button",{className:"medium thin red",onClick:this.submit},"Submit"))))}}]),e}(i.a.Component),J=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"d-flex flex-column justify-content-around h-100"},i.a.createElement("p",{className:"text-center"},"Sorry, mobile devices are not supported!"))}}]),e}(i.a.Component),R=(n(73),function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"d-flex flex-column justify-content-around align-items-center h-100"},i.a.createElement("div",null,i.a.createElement("h1",{className:"display-2 font-weight-bold"},"Transcriboid"),i.a.createElement("p",{className:"m-0 text-center font-weight-bold text-muted"},"A randomly generated transcription trainer.")),i.a.createElement(o.b,{to:"/main"},i.a.createElement("button",{className:"large"},"Start")),i.a.createElement("p",{className:"m-3 fixed-bottom text-right"},"Made by Ethan Leba, 2019"))}}]),e}(i.a.Component)),q=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(i)))).state={loading:!0,redirect_home:!1,redirect_main:!1,actual_song:[],corrected_song:[]},n.handlePlayAgain=function(){g.a.Transport.stop(),n.setState({redirect_main:!0})},n.handleBackToStart=function(){g.a.Transport.stop(),n.setState({redirect_home:!0})},n.getAmtCorrect=function(){return n.state.corrected_song.filter(function(t){return t.correct}).length},n.getTotal=function(){return n.state.actual_song.length},n.getPct=function(){return Math.floor(n.getAmtCorrect()/n.getTotal()*100)},n}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.props.hasPost()?b.a.post("".concat("http://178.128.145.15:5000","/api/compare"),this.props.popPost()).then(function(t){return JSON.parse(t.data)}).then(function(e){t.setState({actual_song:e.actual,corrected_song:e.corrected,loading:!1}),console.log(e)}).catch(function(t){console.log(t)}):this.setState({redirect_home:!0})}},{key:"render",value:function(){return this.state.redirect_home?i.a.createElement(m.a,{to:"/"}):this.state.redirect_main?i.a.createElement(m.a,{to:"/main"}):this.state.loading?null:i.a.createElement("div",{className:"h-100 row align-items-center"},i.a.createElement("div",{className:"col"},i.a.createElement("div",{className:"d-flex flex-row align-items-center justify-content-between my-2"},i.a.createElement("h3",{className:"m-0 font-weight-bold"},"Actual Transcription"),i.a.createElement(D,{music:this.state.actual_song})),i.a.createElement(T,{keyId:1,width:window.innerWidth-20,height:window.innerHeight/3,notes:this.state.actual_song,editable:!1}),i.a.createElement("div",{className:"d-flex flex-row align-items-center justify-content-between my-2"},i.a.createElement("h3",{className:"m-0 font-weight-bold"},"Your Transcription (",this.getPct(),"% correct)"),i.a.createElement(D,{music:this.state.corrected_song})),i.a.createElement(T,{keyId:2,width:window.innerWidth-20,height:window.innerHeight/3,notes:this.state.corrected_song,editable:!1,comparison:!0}),i.a.createElement("div",{className:"d-flex flex-row align-items-center justify-content-center my-2"},i.a.createElement("button",{className:"medium",onClick:this.handleBackToStart},"Quit"),i.a.createElement("button",{className:"medium red",onClick:this.handlePlayAgain},"Try again"))))}}]),e}(i.a.Component),G=n(43),Q=function(t){var e=t.component,n=Object(G.a)(t,["component"]);return i.a.createElement(m.b,Object.assign({},n,{render:function(t){return function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];var r=Object.assign.apply(Object,[{}].concat(n));return i.a.createElement(t,r)}(e,t,n)}}))},U=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(i)))).state={post_object:[],has_post:!1},n.setPost=function(t){n.setState({post_object:t,has_post:!0})},n.popPost=function(){var t=n.state.post_object;return n.setState({post_object:[],has_post:!1}),t},n.hasPost=function(){return n.state.has_post},n}return Object(h.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return p()?i.a.createElement(J,null):i.a.createElement(m.d,{basename:"/transcriboid-frontend"},i.a.createElement(m.b,{exact:!0,path:"/",component:R}),i.a.createElement(Q,{path:"/main",component:X,setPost:this.setPost}),i.a.createElement(Q,{path:"/compare",component:q,popPost:this.popPost,hasPost:this.hasPost}),i.a.createElement(m.b,{component:function(){return i.a.createElement("div",null,"404 Not found ")}}))}}]),e}(i.a.Component),Y=Object(d.Emitter)(function(t){t.emit;return i.a.createElement(U,null)}),$=Object(d.EmitterProvider)(Y);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(r.render)(i.a.createElement(o.a,null,i.a.createElement($,null)),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[44,1,2]]]);
//# sourceMappingURL=main.2487fbd2.chunk.js.map